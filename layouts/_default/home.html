{{ define "main" }}
<h1 class="sr-only">Home</h1>

<div class="hero vertical centered container shadowed-text">
  {{/* Dynamic text will be hidden for screen readers. */}}
  <h2 class="hero--callout vertical centered container" aria-hidden="true">
    <div class="hero--callout--subtext">Envision Your</div>
    <div
      id="service-offered"
      class="hero--callout--headline centered container"
    >
      <noscript>Digital Masterpiece</noscript>
    </div>
  </h2>
  <h2 class="sr-only">Envision Your Digital Masterpiece</h2>

  <h3 class="tagline">Let's make it real.</h3>
  <div class="centered wrapping container">
    <a href="/about" class="big blue shadowed bordered glowing button">
      <span>Learn More</span>
      <span class="sr-only"
        >Learn more about Digital Masterpiece LLC and the services we
        provide.</span
      >
    </a>
    <a href="/services" class="big green shadowed bordered glowing button">Services & Pricing</a>
  </div>
</div>

<script>
  const serviceText = document.getElementById("service-offered");

  window.onload = () => {
    let interval = 0;
    const intervalIncrement = 2500;
    const services = [
      "Website",
      "Online Application",
      "Digital Masterpiece"
    ];

    services.forEach(service => {
      setTimeout(() => {
        serviceText.innerText = "";
        const letters = service.split("");
        let letterInterval = 0;
        const letterIntervalIncrement = intervalIncrement / letters.length / 4;

        letters.forEach((letter, index) => {
          setTimeout(() => {
            serviceText.textContent = serviceText.textContent.replace("|", "");
            serviceText.textContent += letter + "|";
          }, letterInterval);

          if (index === letters.length - 1) {
            setTimeout(() => {
              serviceText.textContent = serviceText.textContent.slice(0, -1);
            }, letterInterval + 1);
          }
          letterInterval += letterIntervalIncrement;
        });

        letterInterval += intervalIncrement / 2;

        // If this isn't the last service, "backspace" the letters.
        if (!(service === services[services.length - 1])) {
          letters.forEach(letter => {
            setTimeout(() => {
              serviceText.textContent =
                serviceText.textContent.slice(0, -2) + "|";
            }, letterInterval);
            letterInterval += letterIntervalIncrement;
          });
        }
      }, interval);

      interval += intervalIncrement;
    });
  };
</script>
{{ end }}
